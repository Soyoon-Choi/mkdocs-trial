# 3.GUI 모드 퀵 가이드

이 장은 Migration Center를 처음 접하는 사용자들이 GUI 모드 Migration Center를 각
단계별로 사용할 수 있도록 간략한 지침을 제공한다.

### 단계별 지침

사용자들은 이 절에 명시된 지침을 따라 GUI 모드로 쉽게 마이그레이션을 수행할 수
있다. 전반적인 과정은 아래와 같다.

1. Migration Center 시작

2. 프로젝트 준비

   1. 원본 데이터베이스와 대상 데이터베이스 연결 등록

   2. 프로젝트 생성

   3. 프로젝트 열기

   4. 원본 및 대상 데이터베이스에 연결

   5. 마이그레이션 옵션 설정

3. 프로젝트 구축

4. 프로젝트 조정

5. 프로젝트 실행

6. 프로젝트 검증

#### Migration Center 시작

마이크로소프트 윈도우 환경에서는 "migcenter.bat" 아이콘을 더블 클릭해서
Migration Center를 GUI모드로 실행할 수 있다. 유닉스 계열의 운영 체제에서는
"migcenter.sh"를 실행한다. 64비트 윈도우 환경이 아닌 다른 환경에서 이 도구를
사용한다면, 자바 런타임 환경(JRE)이 설치되어 있는지, 또 터미널에서 자바 런타임
환경(JRE)에 접근 가능하도록 적절한 PATH 환경 변수가 정의되어 있는지 확인한다.

#### 데이터베이스 연결 등록

1. "Database" 메뉴 아래의 "Add Database Connection" 메뉴 항목을 선택하거나,
   도구 모음에서 "Add Database Connection" 아이콘을 클릭한다.

2. "Add Database Connection" 대화 상자에서 다음의 입력 필드를 채운다.

   1. DB Product: 데이터베이스 시스템의 이름.

   2. Connection Name: Migration Center 프로젝트에서 사용될 고유한
      데이터베이스 연결 이름

   3. IP: 데이터베이스 서버의 IP 주소.

   4. Port: 데이터베이스 서버의 포트 번호 또는 Altibase 서버의 SSL 포트 번호

   5. User: 데이터베이스에서 유효한 사용자 ID

   6. Password: 사용자 ID의 비밀번호

   7. JDBC Driver: 데이터베이스에 연결하기 위해 사용될 JDBC 드라이버 파일의
      경로

   8. Encoding: 클라이언트가 사용하는 기본 문자 집합(character set)

   9. IP Version: 이 연결에 사용될 IP 프로토콜의 버전

   10. Property: 이 연결에 사용될 JDBC 드라이버 프로퍼티  
       만약 SSL로 접속할 때에는 아래처럼 ssl_enable=true로 지정하고
       *path_to_keystore, path_to_truststore, password*는 각각의 인증 환경에
       맞게 설정한다.

```
ssl_enable=true&keystore_url=path_to_keystore&keystore_password=password&truststore_url=path_to_truststore&truststore_password=password 
```

3. 이 연결을 연결 목록에 추가하기 전에, 입력한 사항을 확인하기 위해 대화 상자
   하단의 "Test" 버튼을 클릭한다.

4. 연결 테스트에 통과하면, 대화 상자 하단의 "OK" 버튼을 눌러서 이 연결을 연결
   목록에 추가하고 "Add Database Connection" 대화 상자를 닫는다.

#### 프로젝트 생성

1. "Project" 메뉴 아래의 "Create Project" 메뉴 항목을 선택하거나, 도구 모음에서
   "Create Project" 아이콘을 클릭한다.

2. "New Project" 대화 상자에서 입력 필드를 채운다:

   1. Project Name: Migration Center에서 고유하고 사용자에게 의미 있는
      마이그레이션 프로젝트 이름
   2. Project Path: 마이그레이션 프로젝트 파일을 저장할 폴더 경로이다. 그러나,
      이 값은 사용자가 편집할 수 없다.
   3. Source Database: 이 프로젝트에서 마이그레이션 될 데이터베이스 객체를
      가지고 있는 데이터베이스로의 연결
   4. Destination Database: 원본 데이터베이스의 데이터베이스 객체를 복사하여
      저장할 Altibase 데이터베이스로의 연결. 프로젝트가 "DB to File"
      마이그레이션으로 구성되었더라도, 이 입력 필드는 필수이다.

3. 프로젝트를 생성하려면 "New Project" 대화 상자 하단의 "OK" 버튼을 클릭한다.

#### 프로젝트 열기

프로젝트를 열려면, "Project" 메뉴 아래의 "Open Project" 메뉴 항목을 선택한다.
그러면, 파일 열기 대화 상자가 나타날 것이다. 사용자는 프로젝트 폴더를 선택해서
"Open" 버튼을 누르기만 하면 된다.

#### 프로젝트 구성

사용자들은 세부 사항을 설정하기 전에 프로젝트의 기본 전략을 구성할 수 있다. 전체
설명은 "부록 A. 마이그레이션 옵션"을 참고한다.

#### 원본 및 대상 데이터베이스로 연결

원본 및 대상 데이터베이스로의 연결은 "구축" 단계로 진행하기 위해 필수적이다.
프로젝트에서 데이터베이스로 연결하려면, "Project" 메뉴 아래의 "Connect" 메뉴
항목을 선택하거나, 열려진 프로젝트에 오른쪽 마우스 버튼을 클릭해서 "Connect"를
선택한다.

#### 프로젝트 구축

"구축" 단계는 마이그레이션 과정에서 필수이지만, 그 실행은 간단하다.

1. "Migration" 메뉴 아래 또는 도구 모음에서 "Build User"나 "Build Table" 항목을
   클릭한다.

2. 원본 데이터베이스의 각 테이블의 레코드 개수를 어떤 방식으로 가져올지
   선택하는 대화상자가 나타난다. 원하는 방법을 선택하고 "OK" 버튼을 클릭한다.
   선택 가능한 옵션과 각 옵션에 대한 설명은 4장의 구축 단계에서 "[내부
   동작](#내부-동작)"을 참고한다.

3. "Build Table"로 시작했을 경우, 이관할 테이블 목록을 구성하는 대화 상자가
   나타난다. "![](media/MigrationCenter/f614c334dace127d00b84a2951b20ff2.png)" 버튼을 누른 뒤, 검색 창에서 원하는 테이블을 추가한다. 테이블 목록 구성을
   완료하면, "Build" 버튼을 눌러 구축 단계를 진행한다.

4. "Build" 대화 상자가 나타나고 진행 상태가 보일 것이다. 끝나면, "Report"
   버튼이 하단에 나타날 것이다.

5. "Report" 버튼을 누르면, HTML 보고서 파일이 프로젝트 디렉터리에 생성되고
   "Build Report"라는 새로운 대화 상자가 나타난다. 이 대화상자는 HTML 보고서
   파일로의 링크를 제공한다. 한번 "Report" 버튼을 눌러서 HTML 보고서 파일이
   생성되면 "Report" 메뉴 아래의 "Build Report" 메뉴 항목이 활성화되므로, 이
   메뉴 항목을 이용해서 언제든지 "Build Report" 대화상자를 열 수 있다.

#### 프로젝트 조정

"조정" 단계는 "Run"이 수행될 방법을 결정하기 때문에, 마이그레이션 과정에서 아주
중요하며, 양쪽 데이터베이스에 대한 몇 가지 지식을 필요로 한다. 이 절차에 대한
상세한 내용은 "4장 Migration Center 내부"를 참고하도록 한다. 다음은 간단한
지침이다:

1. "Migration" 메뉴 아래의 "Reconcile" 메뉴 항목을 선택하거나, 도구 모음에서
   "Reconcile" 아이콘을 클릭한다.

2. 목적에 맞게 기본 데이터 타입 맵핑을 수정하거나 그대로 승인한다.

3. 원본 데이터베이스에서 기본 대상인 Altibase의 테이블스페이스를 지정한다.

4. 원본 데이터베이스의 파티션드 테이블이 Altibase로 마이그레이션될 방법을
   수정하거나 지정한다.

5. 원본 데이터베이스의 각 테이블 또는 인덱스에 대해 대상 테이블스페이스를
   지정한다.

6. 원본 데이터베이스의 각 테이블에서 데이터 추출시에 사용할 SELECT문을
   확인하고, 원한다면 수정한다.

7. 스키마 마이그레이션 과정에서 사용될 DDL SQL문장들이 올바른지 확인하고,
   그렇지 않다면 수정하라.

8. 이 단계에 대해 보고서를 생성하려면 "Report" 버튼을 누른다.

#### 프로젝트 실행

"실행" 단계를 실행하는 것은 프로젝트를 구축하는 것만큼이나 간단하지만, 실행하면
되돌릴 수 없다. 따라서, 더 진행하기 전에 모든 설정을 확인하도록 한다.

1. "Migration”메뉴 아래의 "Run" 메뉴 항목을 선택하거나, 도구 모음에서 "Run"
   아이콘을 클릭한다.

2. 경고 대화 상자에서 "Ok"를 눌러서 모든 설정이 제대로 되었음을 확인한다.

3. 진행 상황 및 최종 보고서를 자세히 살펴 보도록 한다.

#### 프로젝트 검증

"실행" 단계에서 이관된 데이터가 올바르게 수행되었는지 검사한다.

1. "Migration”메뉴 아래의 "Data Validation" 메뉴 항목을 선택한다.

2. 경고 대화 상자에서 "Ok"를 눌러서, 모든 설정이 제대로 되었는지 확인한다. Data
   Validation 대화상자가 나타나고 "검증" 단계가 수행된다.

3. 데이터 검증이 완료되면 Data Validation 대화상자 하단의 "Report" 버튼이
   활성화된다.

4. "Report" 버튼을 누르면 HTML 보고서 파일이 프로젝트 디렉터리에 생성되고,
   "Data Validation Report" 대화상자가 나타난다. 이 대화상자는 HTML 보고서
   파일로의 링크를 제공한다. 한 번 HTML 보고서 파일이 생성되면, "Report" 메뉴
   아래의 "Data Validation Report" 메뉴 항목이 활성화되므로, 이 항목을 이용해서
   언제든지 "Data Validation Report" 대화상자를 열 수 있다.

5. 보고서에서 원본과 대상 데이터베이스의 데이터가 불일치하면, "filesync" 기능을
   사용해서 데이터를 일치시킬 수 있다.

다음은 "filesync" 기능을 사용하는 절차이다.

1. "Migration" 메뉴 아래의 "Migration Options" 메뉴 항목을 선택한다.

2. 경고 대화상자에서 "Ok"를 누른다.

3. "Data Validation Options" 항목의 "Operation" 콤보 박스에서 "FILESYNC"를
   선택한 다음, "Ok"를 누른다.

4. "Migration" 메뉴 아래의 "Reconcile" 메뉴 항목을 선택하거나, 도구 모음에서
   "Reconcile" 아이콘을 클릭한다.

5. 팝업 상자에서 "Table Mode"를 선택한다.

6. 데이터를 일치시킬 테이블을 선택한다.

7. 계속 "Next"를 눌러 조정(Reconcile) 단계를 완료한다.

8. "Migration" 메뉴 아래의 "Data Validation" 메뉴 항목을 선택한다.

9. Data Validation 대화상자가 나타나고 "filesync" 기능이 수행된다. 수행 완료 후
   "Report" 버튼이 창 하단에 활성화된다.

10. 보고서를 확인해서 데이터의 불일치가 해소되었는지 확인한다.


<br/>

